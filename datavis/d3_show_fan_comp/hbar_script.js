var data = [{"ratio": "1.32983682983683", "bet_show": "0", "stat_sig": "0", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Star"}, {"ratio": "1.4189189189189186", "bet_show": "0", "stat_sig": "0", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Black Ink"}, {"ratio": "1.696969696969697", "bet_show": "0", "stat_sig": "0", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Greenleaf"}, {"ratio": "1.7706093189964158", "bet_show": "0", "stat_sig": "0", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " The Neighborhood"}, {"ratio": "2.0061538461538464", "bet_show": "0", "stat_sig": "0", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " The Voice"}, {"ratio": "2.2055555555555553", "bet_show": "0", "stat_sig": "0", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Charmed"}, {"ratio": "2.23625730994152", "bet_show": "0", "stat_sig": "0", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " The Paynes"}, {"ratio": "2.3398692810457518", "bet_show": "0", "stat_sig": "0", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Lethal Weapon"}, {"ratio": "2.3545454545454545", "bet_show": "0", "stat_sig": "0", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " If Loving You is Wrong"}, {"ratio": "2.380373831775701", "bet_show": "0", "stat_sig": "0", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Queen Sugar"}, {"ratio": "2.407894736842105", "bet_show": "0", "stat_sig": "0", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Luke Cage"}, {"ratio": "2.477922077922078", "bet_show": "0", "stat_sig": "0", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Grey's Anatomy"}, {"ratio": "2.5363636363636366", "bet_show": "0", "stat_sig": "0", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Insecure"}, {"ratio": "2.644444444444445", "bet_show": "0", "stat_sig": "0", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " A Million Little Things"}, {"ratio": "2.680701754385965", "bet_show": "0", "stat_sig": "0", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Basketball Wives"}, {"ratio": "2.681962025316456", "bet_show": "0", "stat_sig": "0", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " This is Us"}, {"ratio": "2.7683823529411766", "bet_show": "0", "stat_sig": "0", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Black Lightning"}, {"ratio": "2.834645669291339", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " The Haves and Have Nots"}, {"ratio": "2.843137254901961", "bet_show": "1", "stat_sig": "0", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Hustle in Brooklyn"}, {"ratio": "2.908374384236453", "bet_show": "0", "stat_sig": "0", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Love & Hip Hop"}, {"ratio": "2.923391215526047", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Dear White People"}, {"ratio": "3.012987012987013", "bet_show": "0", "stat_sig": "0", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Married to Medicine"}, {"ratio": "3.0276073619631902", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Black-ish"}, {"ratio": "3.3384615384615386", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Rel"}, {"ratio": "3.3401069518716575", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Brooklyn Nine-Nine"}, {"ratio": "3.4132231404958677", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " The Rookie"}, {"ratio": "3.4196428571428577", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Chicago P.D."}, {"ratio": "3.4807692307692313", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Chicago Fire"}, {"ratio": "3.5142857142857142", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " The Real Housewives"}, {"ratio": "3.7198067632850247", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Station 19"}, {"ratio": "3.75", "bet_show": "0", "stat_sig": "0", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " America to Me"}, {"ratio": "3.750544662309368", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " 911"}, {"ratio": "3.9417989417989414", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Atlanta"}, {"ratio": "3.955882352941176", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " The Four"}, {"ratio": "4.015151515151516", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " God Friended Me"}, {"ratio": "4.065934065934066", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " The Handmaid's Tale"}, {"ratio": "4.110222222222222", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Empire"}, {"ratio": "4.2939759036144585", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Ballers"}, {"ratio": "4.536585365853658", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Orange is the New Black"}, {"ratio": "4.5396825396825395", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " The Affair"}, {"ratio": "4.745365853658536", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Power"}, {"ratio": "5.012195121951219", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Game of Thrones"}, {"ratio": "5.517857142857142", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " How to Get Away with Murder"}, {"ratio": "5.615160349854229", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " All-American"}, {"ratio": "6.004566210045661", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " She's Gotta Have It"}, {"ratio": "6.170454545454545", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " On My Block"}, {"ratio": "6.714285714285714", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Westworld"}, {"ratio": "7.0", "bet_show": "0", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Mind Your Business with Mahisha"}, {"ratio": "7.5", "bet_show": "1", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " The Next Big Thing"}, {"ratio": "7.5", "bet_show": "1", "stat_sig": "1", "feature": " Attended a live event centered around the show (like a watch party or meet the cast event)", "show_name": " Raq Rants"}];



//var colors = d3.scale.category10();
var colors = d3.scale.ordinal()
    .range(["#aaaaaa","#090909","#d5d5d5","#92c5de","#0571b0"]);



//sort bars based on value
data = data.sort(function (a, b) {
    return d3.ascending(a.ratio, b.ratio);
})

//console.log(data);

//set up svg using margin conventions - we'll need plenty of room on the left for labels
var margin = {
    top: 40,
    right: 40,
    bottom: 15,
    left: 200
};

var width = 400 - margin.left - margin.right,
    height = 600 - margin.top - margin.bottom;

var svg = d3.select("#graphic").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var x = d3.scale.linear()
    .range([0, width])
    .domain([0, d3.max(data, function (d) {
	return d.ratio;
    })]);

var y = d3.scale.ordinal()
    .rangeRoundBands([height, 0], .1)
    .domain(data.map(function (d) {
	return d.show_name;
    }));

//make y axis to show bar names
var yAxis = d3.svg.axis()
    .scale(y)
//no tick marks
    .tickSize(0)
    .orient("left");

var gy = svg.append("g")
    .attr("class", "y axis")
    .call(yAxis)

var bars = svg.selectAll(".bar")
    .data(data)
    .enter()
    .append("g")

//append rects
bars.append("rect")
    .attr("class", "bar")
    .attr("y", function (d) {
	return y(d.show_name);
    })
    .attr("height", y.rangeBand())
    .attr("x", 0)
    .attr("width", function (d) {
	return x(d.ratio);
    })
    .style("fill", function (d) {
	// remember the ordinal scales? We use the colors scale to get a colour for our manufacturer. Now each node will be coloured
	// by who makes the chocolate.
	return colors(d.bet_show);
    });

//add a value label to the right of each bar
bars.append("text")
    .attr("class", "label")
//y position of the label is halfway down the bar
    .attr("y", function (d) {
	return y(d.show_name) + y.rangeBand() / 2 + 4;
    })
//x position is 3 pixels to the right of the bar
    .attr("x", function (d) {
	return x(d.ratio) + 3;
    })
    .text(function (d) {
	return d3.format(".1f")(d.ratio);
    })
    .style("fill", function (d) {
	// remember the ordinal scales? We use the colors scale to get a colour for our manufacturer. Now each node will be coloured
	// by who makes the chocolate.
	return colors(d.bet_show);
    });


svg.append("text")
    .attr("x", (width / 2))
    .attr("y", 0 - (margin.top / 2))
    .attr("text-anchor", "middle")
    .style("font-size", "12px")
    .text("Fans of shows tend to like live events");


svg.append("text")
    .attr("x", (width / 2))
    .attr("y", 0 - (margin.top / 2)+16)
    .attr("text-anchor", "middle")
    .style("font-size", "12px")
    .text("particularly fans of BET shows");

